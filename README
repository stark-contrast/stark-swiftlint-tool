# Stark SwiftLint Tool - User Guide

A specialized SwiftLint tool that checks your iOS projects for accessibility compliance and automatically reports results to the Stark platform.

## What This Tool Does

The Stark SwiftLint Tool scans your iOS project for accessibility issues and helps ensure your app meets accessibility standards. It includes 30+ specialized accessibility rules that check for things like:

- Proper text contrast ratios
- Touch target sizes
- Screen reader compatibility
- Label associations
- Video captions and audio descriptions
- And many more accessibility best practices

## System Requirements

- **macOS with Apple Silicon (M1/M2/M3)** - Currently only Apple Silicon Macs are supported
- **Xcode** (if integrating with Xcode projects)
- **[Stark account](https://app.getstark.co)** with an iOS asset type

## Getting Started

### Step 1: Download the Tool

1. [Download the `stark-swiftlint-tool.tar.gz` file](https://TODO)
2. Extract it to a convenient location on your Mac:
   ```bash
   tar -xzf stark-swiftlint-tool.tar.gz
   ```
3. This creates a folder containing the `stark-swiftlint-scan` executable and the `stark-swiftlint` executable (used by `stark-swiftlint-scan`).

### Step 2: Get Your Stark Token

1. Log in to your Stark account at [app.getstark.co](https://app.getstark.co)
2. Navigate to your project
3. Create or edit your iOS asset
4. Find your project's **Stark Token** (it looks like `stark_1452216e48434f07bd0cf4f6f6502e56`)
5. Copy this token - you'll need it for running the tool

## Usage Options

### Option A: Run from Terminal (Recommended for Testing)

Open Terminal and navigate to where you extracted the tool:

```bash
# Basic usage - scans current directory
./stark-swiftlint-scan --stark-token YOUR_STARK_TOKEN_HERE

# Scan a specific project path
./stark-swiftlint-scan --stark-token YOUR_STARK_TOKEN_HERE --path /path/to/your/ios/project

# Give your scan a custom name
./stark-swiftlint-scan --stark-token YOUR_STARK_TOKEN_HERE --name "My App Accessibility Scan"
```

**Example:**
```bash
./stark-swiftlint-scan --stark-token stark_1452216e48434f07bd0cf4f6f6502e56 --name "MyApp iOS Lint" --path ~/Projects/MyApp
```

### Option B: Integrate with Xcode (Recommended for Continuous Checking)

This automatically runs accessibility checks every time you build your project.

1. **Open your Xcode project**
2. **Edit your build scheme:**
   - Go to **Product > Scheme > Edit Scheme...** (or press **⌘ <**)
3. **Add a build script:**
   - In the left sidebar, expand the **Build** section
   - Click on **Pre-actions** (to run before building) or **Post-actions** (to run after building)
   - Click the **+** button and select **New Run Script Action**
4. **Configure the script:**
   - In the **Provide build settings from** dropdown, select your project
   - In the script text area, paste:
   ```bash
   /full/path/to/stark-swiftlint-scan --stark-token YOUR_STARK_TOKEN_HERE --name "iOS Lint Check" --path "${SRCROOT}"
   ```

**Important:** Replace `/full/path/to/stark-swiftlint-scan` with the actual path where you extracted the tool.

**Example:**
```bash
/Users/john/Tools/stark-swiftlint-scan --stark-token stark_1452216e48434f07bd0cf4f6f6502e56 --name "MyApp Accessibility" --path "${SRCROOT}"
```

## Command Options

| Option | Description | Required |
|--------|-------------|----------|
| `--stark-token` | Your Stark project token | Yes |
| `--name` | Custom name for the scan report | No (defaults to folder name) |
| `--path` | Path to your iOS project | No (defaults to current directory) |

## What Happens When You Run It

1. **Scans your code:** The tool examines all Swift files in your project
2. **Applies accessibility rules:** Checks against 30+ accessibility best practices
3. **Reports to Stark:** Automatically uploads results to your Stark project dashboard
4. **Shows summary:** Displays a summary in your terminal

## Viewing Results

After running the scan:

1. **Check your terminal** for a summary of issues found
2. **Visit your Stark dashboard** at [app.getstark.co](https://app.getstark.co) to see detailed results
3. **Review specific violations** with file names and line numbers
4. **Track progress** over time as you fix accessibility issues

## Troubleshooting

### "Command not found" or Permission Errors
```bash
# Make the tool executable
chmod +x /path/to/stark-swiftlint-scan
```

### "Binary not compatible"
- This tool currently only works on Apple Silicon Macs (M1/M2/M3)
- Intel Macs are not yet supported

### "Stark token invalid"
- Double-check your token from the Stark dashboard
- Ensure you're using the token for the correct iOS project
- Tokens start with `stark_` followed by a long string of characters

### "No Swift files found"
- Make sure you're pointing to the correct project directory
- The tool looks for `.swift` files in the specified path

### Xcode Integration Issues
- Verify the full path to `stark-swiftlint-scan` is correct
- Make sure the file is executable (`chmod +x`)
- Check that your Stark token is valid

## Best Practices

1. **Start with terminal testing** before integrating with Xcode
2. **Use descriptive names** for your scans to track different builds
3. **Run regularly** to catch accessibility issues early
4. **Review results in Stark** to understand and prioritize fixes
5. **Keep the tool updated** by downloading new versions from Stark

## Getting Help

- **Stark Support:** Visit [Stark support](https://www.getstark.co/support/) or email [support@getstark.co](mailto:support@getstark.co)
- **Community:** Join the [Stark community on Slack](https://join.slack.com/t/stark-community/shared_invite/zt-2vcvslegh-hdKIWCsahSdsrk3CPq9k7w)

---

*This tool helps ensure your iOS app is accessible to all users. Regular scanning and fixing of accessibility issues makes your app more inclusive and often improves the experience for all users.*